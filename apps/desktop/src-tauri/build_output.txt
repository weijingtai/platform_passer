warning: unused import: `Context`
 --> crates/transport/src/client.rs:1:22
  |
1 | use anyhow::{Result, Context};
  |                      ^^^^^^^
  |
  = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

warning: unused import: `sync::Arc`
 --> crates/transport/src/server.rs:3:28
  |
3 | use std::{net::SocketAddr, sync::Arc};
  |                            ^^^^^^^^^

warning: unexpected `cfg` condition value: `cargo-clippy`
  --> crates/clipboard/src/macos.rs:19:37
   |
19 | ...d: id = msg_send![objc::class!(NSPasteboard), generalPasteboard];
   |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = note: no expected values for `feature`
   = note: using a cfg inside a macro will use the cfgs from the destination crate and not the ones from the defining crate
   = help: try referring to `sel_impl` crate for guidance on how handle this unexpected cfg
   = help: the macro `sel_impl` may come from an old version of the `objc` crate, try updating your dependency with `cargo update -p objc`
   = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
   = note: `#[warn(unexpected_cfgs)]` on by default
   = note: this warning originates in the macro `sel_impl` which comes from the expansion of the macro `msg_send` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `cargo-clippy`
  --> crates/clipboard/src/macos.rs:19:47
   |
19 | ...   let ns_pasteboard: id = msg_send![objc::class!(NSPasteboard), general...
   |                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = note: no expected values for `feature`
   = note: using a cfg inside a macro will use the cfgs from the destination crate and not the ones from the defining crate
   = help: try referring to `objc::class` crate for guidance on how handle this unexpected cfg
   = help: the macro `objc::class` may come from an old version of the `objc` crate, try updating your dependency with `cargo update -p objc`
   = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
   = note: this warning originates in the macro `objc::class` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `cargo-clippy`
  --> crates/clipboard/src/macos.rs:20:33
   |
20 | ... = msg_send![ns_pasteboard, stringForType: cocoa::appkit::NSPasteboardTypeString];
   |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = note: no expected values for `feature`
   = note: using a cfg inside a macro will use the cfgs from the destination crate and not the ones from the defining crate
   = help: try referring to `sel_impl` crate for guidance on how handle this unexpected cfg
   = help: the macro `sel_impl` may come from an old version of the `objc` crate, try updating your dependency with `cargo update -p objc`
   = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
   = note: this warning originates in the macro `sel_impl` which comes from the expansion of the macro `msg_send` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `cargo-clippy`
  --> crates/clipboard/src/macos.rs:26:57
   |
26 | ...::os::raw::c_char = msg_send![ns_string, UTF8String];
   |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = note: no expected values for `feature`
   = note: using a cfg inside a macro will use the cfgs from the destination crate and not the ones from the defining crate
   = help: try referring to `sel_impl` crate for guidance on how handle this unexpected cfg
   = help: the macro `sel_impl` may come from an old version of the `objc` crate, try updating your dependency with `cargo update -p objc`
   = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
   = note: this warning originates in the macro `sel_impl` which comes from the expansion of the macro `msg_send` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `cargo-clippy`
  --> crates/clipboard/src/macos.rs:35:37
   |
35 | ...d: id = msg_send![objc::class!(NSPasteboard), generalPasteboard];
   |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = note: no expected values for `feature`
   = note: using a cfg inside a macro will use the cfgs from the destination crate and not the ones from the defining crate
   = help: try referring to `sel_impl` crate for guidance on how handle this unexpected cfg
   = help: the macro `sel_impl` may come from an old version of the `objc` crate, try updating your dependency with `cargo update -p objc`
   = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
   = note: this warning originates in the macro `sel_impl` which comes from the expansion of the macro `msg_send` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `cargo-clippy`
  --> crates/clipboard/src/macos.rs:35:47
   |
35 | ...   let ns_pasteboard: id = msg_send![objc::class!(NSPasteboard), general...
   |                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = note: no expected values for `feature`
   = note: using a cfg inside a macro will use the cfgs from the destination crate and not the ones from the defining crate
   = help: try referring to `objc::class` crate for guidance on how handle this unexpected cfg
   = help: the macro `objc::class` may come from an old version of the `objc` crate, try updating your dependency with `cargo update -p objc`
   = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
   = note: this warning originates in the macro `objc::class` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `cargo-clippy`
  --> crates/clipboard/src/macos.rs:38:25
   |
38 |             let _: () = msg_send![ns_pasteboard, clearContents];
   |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = note: no expected values for `feature`
   = note: using a cfg inside a macro will use the cfgs from the destination crate and not the ones from the defining crate
   = help: try referring to `sel_impl` crate for guidance on how handle this unexpected cfg
   = help: the macro `sel_impl` may come from an old version of the `objc` crate, try updating your dependency with `cargo update -p objc`
   = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
   = note: this warning originates in the macro `sel_impl` which comes from the expansion of the macro `msg_send` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `cargo-clippy`
  --> crates/clipboard/src/macos.rs:39:27
   |
39 | ... = msg_send![ns_pasteboard, setString:ns_string forType: cocoa::appkit::NSPasteboardTypeString];
   |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = note: no expected values for `feature`
   = note: using a cfg inside a macro will use the cfgs from the destination crate and not the ones from the defining crate
   = help: try referring to `sel_impl` crate for guidance on how handle this unexpected cfg
   = help: the macro `sel_impl` may come from an old version of the `objc` crate, try updating your dependency with `cargo update -p objc`
   = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
   = note: this warning originates in the macro `sel_impl` which comes from the expansion of the macro `msg_send` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `cargo-clippy`
  --> crates/clipboard/src/macos.rs:52:45
   |
52 | ...d: id = msg_send![objc::class!(NSPasteboard), generalPasteboard];
   |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = note: no expected values for `feature`
   = note: using a cfg inside a macro will use the cfgs from the destination crate and not the ones from the defining crate
   = help: try referring to `sel_impl` crate for guidance on how handle this unexpected cfg
   = help: the macro `sel_impl` may come from an old version of the `objc` crate, try updating your dependency with `cargo update -p objc`
   = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
   = note: this warning originates in the macro `sel_impl` which comes from the expansion of the macro `msg_send` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `cargo-clippy`
  --> crates/clipboard/src/macos.rs:52:55
   |
52 | ...   let ns_pasteboard: id = msg_send![objc::class!(NSPasteboard), general...
   |                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = note: no expected values for `feature`
   = note: using a cfg inside a macro will use the cfgs from the destination crate and not the ones from the defining crate
   = help: try referring to `objc::class` crate for guidance on how handle this unexpected cfg
   = help: the macro `objc::class` may come from an old version of the `objc` crate, try updating your dependency with `cargo update -p objc`
   = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
   = note: this warning originates in the macro `objc::class` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unexpected `cfg` condition value: `cargo-clippy`
  --> crates/clipboard/src/macos.rs:53:47
   |
53 | ...   let change_count: isize = msg_send![ns_pasteboard, changeCount];
   |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = note: no expected values for `feature`
   = note: using a cfg inside a macro will use the cfgs from the destination crate and not the ones from the defining crate
   = help: try referring to `sel_impl` crate for guidance on how handle this unexpected cfg
   = help: the macro `sel_impl` may come from an old version of the `objc` crate, try updating your dependency with `cargo update -p objc`
   = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
   = note: this warning originates in the macro `sel_impl` which comes from the expansion of the macro `msg_send` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unused variable: `dx`
  --> crates/input/src/macos/sink.rs:78:34
   |
78 |             InputEvent::Scroll { dx, dy } => {
   |                                  ^^ help: try ignoring the field: `dx: _`
   |
   = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default

warning: unused variable: `dy`
  --> crates/input/src/macos/sink.rs:78:38
   |
78 |             InputEvent::Scroll { dx, dy } => {
   |                                      ^^ help: try ignoring the field: `dy: _`

warning: unused variable: `source_ptr`
  --> crates/input/src/macos/sink.rs:80:25
   |
80 |                     let source_ptr: *mut libc::c_void = std::mem::transmute...
   |                         ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_source_ptr`

warning: function `AXIsProcessTrusted` is never used
  --> crates/input/src/macos/source.rs:19:8
   |
19 |     fn AXIsProcessTrusted() -> bool;
   |        ^^^^^^^^^^^^^^^^^^
   |
   = note: `#[warn(dead_code)]` (part of `#[warn(unused)]`) on by default

warning: function `CGEventCreateScrollWheelEvent` is never used
  --> crates/input/src/macos/sink.rs:82:28
   |
82 |                         fn CGEventCreateScrollWheelEvent(
   |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: `platform-passer-transport` (lib) generated 2 warnings (run `cargo fix --lib -p platform-passer-transport` to apply 2 suggestions)
warning: `platform-passer-clipboard` (lib) generated 11 warnings
warning: `platform-passer-input` (lib) generated 5 warnings (run `cargo fix --lib -p platform-passer-input` to apply 3 suggestions)
   Compiling platform-passer-desktop v0.1.0 (/Users/jingtaiwei/Git/platform_passer/apps/desktop/src-tauri)
    Checking platform-passer-session v0.1.0 (/Users/jingtaiwei/Git/platform_passer/crates/session)
error[E0428]: the name `perform_file_send` is defined multiple times
   --> crates/session/src/client.rs:183:1
    |
 13 | / async fn perform_file_send(
 14 | |     connection: &quinn::Connection, 
 15 | |     path: PathBuf, 
 16 | |     send: &mut quinn::SendStream, 
...   |
 73 | |     Ok(())
 74 | | }
    | |_- previous definition of the value `perform_file_send` here
...
183 | / async fn perform_file_send(
184 | |     connection: &quinn::Connection, 
185 | |     path: PathBuf, 
186 | |     event_tx: &Sender<SessionEvent>
...   |
222 | |     Ok(())
223 | | }
    | |_^ `perform_file_send` redefined here
    |
    = note: `perform_file_send` must be defined only once in the value namespace of this module

error: failed to run custom build command for `platform-passer-desktop v0.1.0 (/Users/jingtaiwei/Git/platform_passer/apps/desktop/src-tauri)`

Caused by:
  process didn't exit successfully: `/Users/jingtaiwei/Git/platform_passer/target/debug/build/platform-passer-desktop-d77d81740dae8511/build-script-build` (exit status: 1)
  --- stdout
  cargo:rerun-if-env-changed=TAURI_CONFIG
  cargo:rustc-check-cfg=cfg(desktop)
  cargo:rustc-cfg=desktop
  cargo:rustc-check-cfg=cfg(mobile)
  cargo:rerun-if-changed=/Users/jingtaiwei/Git/platform_passer/apps/desktop/src-tauri/tauri.conf.json
  relative URL without a base: "../src"
warning: build failed, waiting for other jobs to finish...
warning: unused imports: `FileTransferResponse` and `InputEvent`
 --> crates/session/src/client.rs:4:35
  |
4 | use platform_passer_core::{Frame, InputEvent, ClipboardEvent, FileTransferRequest, FileTransferResponse, write_frame, read_frame};
  |                                   ^^^^^^^^^^                                       ^^^^^^^^^^^^^^^^^^^^
  |
  = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

warning: unused imports: `FileTransferRequest` and `InputEvent`
 --> crates/session/src/server.rs:3:35
  |
3 | use platform_passer_core::{Frame, InputEvent, ClipboardEvent, FileTransferRequest, FileTransferResponse, write_frame, read_frame};
  |                                   ^^^^^^^^^^                  ^^^^^^^^^^^^^^^^^^^

warning: unused import: `io::AsyncWriteExt`
 --> crates/session/src/server.rs:9:23
  |
9 | use tokio::{fs::File, io::AsyncWriteExt};
  |                       ^^^^^^^^^^^^^^^^^

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `rand`
  --> crates/session/src/client.rs:26:17
   |
26 |             id: rand::random(),
   |                 ^^^^ use of unresolved module or unlinked crate `rand`
   |
   = help: if you wanted to use a crate named `rand`, use `cargo add rand` to add it to your `Cargo.toml`

error[E0061]: this function takes 5 arguments but 3 arguments were supplied
   --> crates/session/src/client.rs:113:9
    |
113 |         perform_file_send(&connection, path, &event_tx).await?;
    |         ^^^^^^^^^^^^^^^^^------------------------------ two arguments of type `&mut SendStream` and `&mut RecvStream` are missing
    |
note: function defined here
   --> crates/session/src/client.rs:13:10
    |
 13 | async fn perform_file_send(
    |          ^^^^^^^^^^^^^^^^^
...
 16 |     send: &mut quinn::SendStream, 
    |     ----------------------------
 17 |     recv: &mut quinn::RecvStream,
    |     ----------------------------
help: provide the arguments
    |
113 |         perform_file_send(&connection, path, /* &mut SendStream */, /* &mut RecvStream */, &event_tx).await?;
    |                                              +++++++++++++++++++++++++++++++++++++++++++++

error[E0061]: this function takes 5 arguments but 3 arguments were supplied
   --> crates/session/src/client.rs:152:42
    |
152 |                          if let Err(e) = perform_file_send(&connection, path, &event_tx).await {
    |                                          ^^^^^^^^^^^^^^^^^------------------------------ two arguments of type `&mut SendStream` and `&mut RecvStream` are missing
    |
note: function defined here
   --> crates/session/src/client.rs:13:10
    |
 13 | async fn perform_file_send(
    |          ^^^^^^^^^^^^^^^^^
...
 16 |     send: &mut quinn::SendStream, 
    |     ----------------------------
 17 |     recv: &mut quinn::RecvStream,
    |     ----------------------------
help: provide the arguments
    |
152 |                          if let Err(e) = perform_file_send(&connection, path, /* &mut SendStream */, /* &mut RecvStream */, &event_tx).await {
    |                                                                               +++++++++++++++++++++++++++++++++++++++++++++

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `rand`
   --> crates/session/src/client.rs:194:17
    |
194 |             id: rand::random(),
    |                 ^^^^ use of unresolved module or unlinked crate `rand`
    |
    = help: if you wanted to use a crate named `rand`, use `cargo add rand` to add it to your `Cargo.toml`

warning: unused variable: `event_tx`
   --> crates/session/src/client.rs:225:56
    |
225 | async fn read_frame_loop(recv: &mut quinn::RecvStream, event_tx: &Sender<SessionEvent>) {
    |                                                        ^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_event_tx`
    |
    = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default

warning: unused variable: `e`
  --> crates/session/src/server.rs:36:21
   |
36 |                 Err(e) => {}, // Already logged inside
   |                     ^ help: if this is intentional, prefix it with an underscore: `_e`

warning: unused variable: `e`
  --> crates/session/src/server.rs:67:32
   |
67 |                     if let Err(e) = sink.inject_event(event) {
   |                                ^ help: if this is intentional, prefix it with an underscore: `_e`

warning: unused variable: `e`
  --> crates/session/src/server.rs:73:32
   |
73 |                     if let Err(e) = clip.set_text(text) {
   |                                ^ help: if this is intentional, prefix it with an underscore: `_e`

warning: unused variable: `other`
   --> crates/session/src/server.rs:114:25
    |
114 |                 Ok(Some(other)) => {
    |                         ^^^^^ help: if this is intentional, prefix it with an underscore: `_other`

Some errors have detailed explanations: E0061, E0428, E0433.
For more information about an error, try `rustc --explain E0061`.
warning: `platform-passer-session` (lib) generated 8 warnings
error: could not compile `platform-passer-session` (lib) due to 5 previous errors; 8 warnings emitted
